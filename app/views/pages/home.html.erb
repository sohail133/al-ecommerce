<% content_for :title, "Home - AL Ecommerce" %>

<div class="min-h-screen bg-pink-lightest">
  <%= render "pages/shared/header" %>
  
  <section class="relative overflow-hidden" data-controller="hero-slider" data-hero-slider-interval-value="5000">
    <div class="relative h-[600px] md:h-[700px] lg:h-[800px]">
      <% if @hero_images.any? %>
        <% @hero_images.each_with_index do |hero_image, index| %>
          <% if hero_image.images.attached? %>
            <% hero_image.images.each_with_index do |image, img_index| %>
              <div data-hero-slider-target="slide" class="absolute inset-0 transition-opacity duration-1000 <%= 'hidden opacity-0' unless index == 0 && img_index == 0 %>">
                <div class="relative h-full bg-cover bg-center animate-ken-burns" style="background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('<%= url_for(image) %>');">
                  <div class="container mx-auto px-4 h-full flex items-center">
                    <div class="text-white max-w-2xl" data-aos="fade-right" data-aos-duration="1000">
                      <% if hero_image.subtitle.present? %>
                        <p class="text-lg md:text-xl mb-2 font-medium animate-fade-in-up" style="animation-delay: 0.2s;"><%= hero_image.subtitle %></p>
                      <% end %>
                      <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold mb-4 animate-fade-in-up" style="animation-delay: 0.4s;"><%= hero_image.title %></h1>
                      <% if hero_image.description.present? %>
                        <p class="text-lg md:text-xl mb-8 text-white/90 animate-fade-in-up" style="animation-delay: 0.6s;"><%= hero_image.description %></p>
                      <% end %>
                      <div class="animate-fade-in-up" style="animation-delay: 0.8s;">
                        <%= link_to "Shop Now", products_path, class: "inline-block bg-white text-green-primary px-8 py-3 rounded-lg font-semibold hover:bg-green-light hover:text-white transition-all duration-200 transform hover:scale-105" %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          <% end %>
        <% end %>
      <% else %>
        <div class="absolute inset-0 bg-gradient-to-br from-green-primary to-green-dark flex items-center justify-center">
          <div class="text-white text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-4">Welcome to AL Ecommerce</h1>
            <p class="text-xl mb-8">Discover amazing products</p>
            <%= link_to "Shop Now", products_path, class: "inline-block bg-white text-green-primary px-8 py-3 rounded-lg font-semibold hover:bg-green-light hover:text-white transition-all duration-200" %>
          </div>
        </div>
      <% end %>
    </div>

    <% if @hero_images.any? && @hero_images.sum { |hi| hi.images.count } > 1 %>
      <button data-action="click->hero-slider#previous" class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-3 rounded-full shadow-lg transition-all duration-200 z-10">
        <%= render "shared/svg_icons/chevron_left", class: "w-6 h-6 text-green-deep" %>
      </button>

      <button data-action="click->hero-slider#next" class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-3 rounded-full shadow-lg transition-all duration-200 z-10">
        <%= render "shared/svg_icons/chevron_right", class: "w-6 h-6 text-green-deep" %>
      </button>

      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex space-x-2 z-10">
        <% total_slides = @hero_images.sum { |hi| hi.images.count } %>
        <% total_slides.times do |index| %>
          <button data-action="click->hero-slider#goToSlide" data-index="<%= index %>" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-colors duration-200"></button>
        <% end %>
      </div>
    <% end %>
  </section>

  <section class="py-16">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="bg-white rounded-lg p-6 shadow-sm border border-pink-border" data-aos="fade-up" data-aos-delay="100">
          <div class="w-12 h-12 bg-green-light rounded-full flex items-center justify-center mb-4">
            <%= render "shared/svg_icons/cart", class: "w-6 h-6 text-green-primary" %>
          </div>
          <h3 class="text-xl font-semibold text-green-deep mb-2">Free Shipping</h3>
          <p class="text-green-muted">Free shipping on orders over $50</p>
        </div>

        <div class="bg-white rounded-lg p-6 shadow-sm border border-pink-border" data-aos="fade-up" data-aos-delay="200">
          <div class="w-12 h-12 bg-green-light rounded-full flex items-center justify-center mb-4">
            <%= render "shared/svg_icons/settings", class: "w-6 h-6 text-green-primary" %>
          </div>
          <h3 class="text-xl font-semibold text-green-deep mb-2">24/7 Support</h3>
          <p class="text-green-muted">We're here to help anytime</p>
        </div>

        <div class="bg-white rounded-lg p-6 shadow-sm border border-pink-border" data-aos="fade-up" data-aos-delay="300">
          <div class="w-12 h-12 bg-green-light rounded-full flex items-center justify-center mb-4">
            <%= render "shared/svg_icons/dollar", class: "w-6 h-6 text-green-primary" %>
          </div>
          <h3 class="text-xl font-semibold text-green-deep mb-2">Money Back</h3>
          <p class="text-green-muted">30-day money back guarantee</p>
        </div>
      </div>
    </div>
  </section>

  <section id="categories" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12" data-aos="fade-up">
        <h2 class="text-3xl md:text-4xl font-bold text-green-deep mb-4">Explore More Collections</h2>
        <p class="text-green-muted max-w-2xl mx-auto">Discover our curated categories tailored just for you</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 md:grid-rows-3 gap-6">
        <% if @categories.any? %>
          <% @categories.first(8).each_with_index do |category, index| %>
            <% 
              card_class = case index
                when 0 then "md:col-start-1 md:row-start-1"
                when 1 then "md:col-start-2 md:row-start-1 md:row-span-2"
                when 2 then "md:col-start-3 md:row-start-1"
                when 3 then "md:col-start-1 md:row-start-2"
                when 4 then "md:col-start-3 md:row-start-2"
                when 5 then "md:col-start-1 md:row-start-3"
                when 6 then "md:col-start-2 md:row-start-3"
                when 7 then "md:col-start-3 md:row-start-3"
                else ""
              end
            %>
            <%= link_to category_path(category), class: "group block #{card_class}", data: { aos: "fade-up", aos_delay: (index % 6) * 100 } do %>
              <div class="relative h-full min-h-[300px] <%= index == 1 ? 'md:min-h-[620px]' : 'md:min-h-[300px]' %> rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02]">
                <% if category.image.attached? %>
                  <%= image_tag category.image, alt: category.name, class: "w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" %>
                <% else %>
                  <div class="w-full h-full bg-gradient-to-br from-green-light to-green-primary flex items-center justify-center">
                    <span class="text-6xl font-bold text-white"><%= category.name.first(2).upcase %></span>
                  </div>
                <% end %>
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"></div>
                <div class="absolute inset-0 bg-green-primary/0 group-hover:bg-green-primary/20 transition-all duration-500"></div>
                
                <% if index == 1 %>
                  <div class="absolute inset-0 flex items-center justify-center">
                    <div class="text-center transform group-hover:scale-105 transition-transform duration-500">
                      <h3 class="text-4xl md:text-5xl font-bold text-white drop-shadow-2xl mb-2"><%= category.name %></h3>
                      <p class="text-white text-lg mb-4"><%= category.products.count %> Products</p>
                      <span class="inline-block bg-white text-green-primary px-6 py-2 rounded-full font-semibold hover:bg-green-primary hover:text-white transition-all duration-300">Shop Now</span>
                    </div>
                  </div>
                <% else %>
                  <div class="absolute bottom-0 left-0 right-0 p-6 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300">
                    <h3 class="text-2xl md:text-3xl font-bold text-white drop-shadow-lg mb-1"><%= category.name %></h3>
                    <p class="text-white text-sm"><%= category.products.count %> Products</p>
                  </div>
                <% end %>
              </div>
            <% end %>
          <% end %>
        <% else %>
          <div class="col-span-full text-center py-12">
            <p class="text-green-muted">No categories available yet.</p>
          </div>
        <% end %>
      </div>
    </div>
  </section>

  <section id="products" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12" data-aos="fade-up">
        <h2 class="text-3xl md:text-4xl font-bold text-green-deep mb-4">Featured Products</h2>
        <p class="text-green-muted max-w-2xl mx-auto">Discover our handpicked selection of premium products</p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <% if @featured_products.any? %>
          <% @featured_products.each_with_index do |product, index| %>
            <%= render "shared/product_card", product: product, index: index, clickable: true %>
          <% end %>
        <% else %>
          <% 8.times do |index| %>
            <%= render "shared/product_card", product: nil, index: index %>
          <% end %>
        <% end %>
      </div>

      <div class="text-center mt-12" data-aos="fade-up">
        <%= link_to "View All Products", products_path, class: "inline-block bg-green-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-dark transition-all duration-200 transform hover:scale-105" %>
      </div>
    </div>
  </section>

  <section class="py-16 bg-pink-lightest">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12" data-aos="fade-up">
        <h2 class="text-3xl md:text-4xl font-bold text-green-deep mb-4">Best Sellers</h2>
        <p class="text-green-muted max-w-2xl mx-auto">Top-rated products loved by our customers</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <% if @best_sellers.any? %>
          <% @best_sellers.each_with_index do |product, index| %>
            <%= render "shared/product_card", product: product, index: index, show_badge: true, badge_text: "Best Seller", clickable: true %>
          <% end %>
        <% else %>
          <% 4.times do |index| %>
            <%= render "shared/product_card", product: nil, index: index, show_badge: true, badge_text: "Best Seller" %>
          <% end %>
        <% end %>
      </div>
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12" data-aos="fade-up">
        <h2 class="text-3xl md:text-4xl font-bold text-green-deep mb-4">Customer Reviews</h2>
        <p class="text-green-muted max-w-2xl mx-auto">See what our customers are saying about us</p>
      </div>

      <div class="relative" data-controller="reviews-slider" data-reviews-slider-interval-value="3000">
        <div class="overflow-hidden">
          <div data-reviews-slider-target="container" class="flex gap-6 transition-transform duration-300">
            <% 6.times do |index| %>
              <div data-reviews-slider-target="review" class="flex-shrink-0 w-full md:w-[calc(50%-12px)] lg:w-[calc(33.333%-16px)]">
                <div class="bg-white rounded-lg shadow-sm border border-pink-border p-6 h-full">
                  <div class="flex items-center mb-4">
                    <% 5.times do |i| %>
                      <%= render "shared/svg_icons/star", class: "w-5 h-5 text-yellow-400" %>
                    <% end %>
                    <span class="text-sm text-green-muted ml-2"><%= rand(3..6) %> days ago</span>
                  </div>
                  <h4 class="text-lg font-semibold text-green-deep mb-2">
                    <%= ["Excellent", "Great Product", "Love it!", "Amazing quality", "Highly recommended", "Perfect"][index] %>
                  </h4>
                  <p class="text-green-muted mb-4">
                    <%= ["Comfortable and stylish! Exactly what I was looking for.", 
                         "I ordered this product and I'm fascinated by its quality.", 
                         "Received it some days ago and I am absolutely fascinated by its quality.",
                         "It's super soft, delightful fragrance. Great purchase!",
                         "Long lasting and nostalgic smell. Worth every penny!",
                         "Pretty enough. Excellent value for money."][index] %>
                  </p>
                  <div class="flex items-center">
                    <div class="w-10 h-10 bg-green-primary rounded-full flex items-center justify-center text-white font-semibold">
                      <%= ["S", "H", "A", "T", "M", "K"][index] %>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm font-semibold text-green-deep">
                        <%= ["Sibgha Shoaib", "Hammad Younas", "Abdul Qayyum", "Talha Qayyum", "Maria Khan", "Khalid Ahmed"][index] %>
                      </p>
                      <p class="text-xs text-green-muted">Verified Customer</p>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>

        <button data-action="click->reviews-slider#previous" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 bg-white p-3 rounded-full shadow-lg hover:bg-green-light transition-all duration-200">
          <%= render "shared/svg_icons/chevron_left", class: "w-6 h-6 text-green-deep" %>
        </button>

        <button data-action="click->reviews-slider#next" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 bg-white p-3 rounded-full shadow-lg hover:bg-green-light transition-all duration-200">
          <%= render "shared/svg_icons/chevron_right", class: "w-6 h-6 text-green-deep" %>
        </button>
      </div>
    </div>
  </section>

  <section class="py-16 bg-gradient-to-r from-green-primary to-green-dark text-white">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto text-center" data-aos="fade-up">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Subscribe to Our Newsletter</h2>
        <p class="text-white/90 mb-8">Get the latest updates on new products and upcoming sales</p>
        <div class="flex flex-col sm:flex-row gap-4 max-w-xl mx-auto">
          <input type="email" placeholder="Enter your email" class="flex-1 px-6 py-3 rounded-lg text-green-deep focus:outline-none focus:ring-2 focus:ring-white">
          <button class="bg-white text-green-primary px-8 py-3 rounded-lg font-semibold hover:bg-green-light hover:text-white transition-all duration-200">Subscribe</button>
        </div>
      </div>
    </div>
  </section>

  <%= render "pages/shared/footer" %>
</div>

