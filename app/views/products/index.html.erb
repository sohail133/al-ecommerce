<% content_for :title, "Products - AL Ecommerce" %>

<div class="min-h-screen bg-pink-lightest">
  <%= render "pages/shared/header" %>

  <div class="container mx-auto px-4 py-8">
    <div class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-green-deep mb-2">Our Products</h1>
      <p class="text-green-muted">Discover our wide range of quality products</p>
    </div>

    <%= render "filters" %>

    <% if @products.any? %>
      <div class="mb-4 flex items-center justify-between">
        <p class="text-sm text-green-muted">
          Showing <span class="font-medium text-green-deep"><%= @products.offset_value + 1 %></span> 
          to <span class="font-medium text-green-deep"><%= [@products.offset_value + @products.limit_value, @products.total_count].min %></span> 
          of <span class="font-medium text-green-deep"><%= @products.total_count %></span> products
        </p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8">
        <% @products.each_with_index do |product, index| %>
          <%= render "shared/product_card", product: product, index: index, clickable: true %>
        <% end %>
      </div>

      <div class="flex justify-center">
        <%= paginate @products, theme: 'customer' %>
      </div>
    <% else %>
      <div class="bg-white rounded-lg shadow-sm border border-pink-border p-12 text-center">
        <p class="text-green-muted text-lg">
          <% if params[:name].present? || params[:category_id].present? || params[:subcategory_id].present? || params[:min_price].present? || params[:max_price].present? || params[:sort].present? %>
            No products found matching your filters. Try adjusting your search.
          <% else %>
            No products available at the moment.
          <% end %>
        </p>
        <% if params[:name].present? || params[:category_id].present? || params[:subcategory_id].present? || params[:min_price].present? || params[:max_price].present? || params[:sort].present? %>
          <%= link_to "Clear Filters", products_path, class: "inline-block mt-4 bg-green-primary text-white px-6 py-2 rounded-lg hover:bg-green-dark transition-colors" %>
        <% end %>
      </div>
    <% end %>
  </div>

  <%= render "pages/shared/footer" %>
</div>
